<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XML to JSON Converter - Tests</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>body{padding:2rem;}</style>
</head>
<body>
    <h1>XML to JSON - Automated Tests</h1>
    <div id="results"></div>
    <script src="../js/xml-to-json.js"></script>
    <script>
        const resultsEl = document.getElementById('results');
        function runTest(name, input, expected, shouldThrow = false) {
            const div = document.createElement('div');
            div.className = 'test-case';
            div.innerHTML = `<strong>Test: ${name}</strong><br>`;
            try {
                const result = xmlToJson(input);
                if (shouldThrow) {
                    div.innerHTML += `<span class='fail'>FAIL: Expected to throw but returned result.</span>`;
                } else if (result.trim() === expected.trim()) {
                    div.innerHTML += `<span class='pass'>PASS</span>`;
                } else {
                    div.innerHTML += `<span class='fail'>FAIL</span><br>Expected:<pre>${expected}</pre>Got:<pre>${result}</pre>`;
                }
            } catch (err) {
                if (shouldThrow) {
                    div.innerHTML += `<span class='pass'>PASS (Threw as expected: ${err.message})</span>`;
                } else {
                    div.innerHTML += `<span class='fail'>FAIL: Threw unexpected error: ${err.message}</span>`;
                }
            }
            resultsEl.appendChild(div);
        }
        runTest('Simple Element', '<root>value</root>', '"value"');
        runTest('Element with Attribute', '<item id="1">Alpha</item>', '{\n  "@id": "1"\n}');
        runTest('Nested Elements', '<root><item>Alpha</item><item>Beta</item></root>', '{\n  "item": [\n    "Alpha",\n    "Beta"\n  ]\n}');
        runTest('Invalid XML', '<root><item></root>', '', true);
        console.log('Tests complete.');
    </script>
</body>
</html>
