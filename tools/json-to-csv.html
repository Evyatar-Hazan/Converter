<!-- JSON to CSV Tool (standalone page) -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON to CSV Converter</title>
    <meta name="description" content="Convert JSON to CSV online. Fast, private, and free.">
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <a href="../index.html" class="back-link">‚Üê Back to Hub</a>
            <h1>JSON to CSV Converter</h1>
            <p class="description">Easily transform your JSON data into a clean CSV format. Fast, private, and works
                entirely in your browser.</p>
        </header>
        <main>
            <div class="card">
                <h2 class="section-title">Step 1: Paste your JSON here</h2>
                <textarea id="jsonInput" placeholder='[
  { "id": 1, "name": "Antigravity", "role": "Assistant" },
  { "id": 2, "name": "User", "role": "Developer" }
]'></textarea>
                <div id="errorMessage" class="error-msg"></div>
                <div class="btn-container">
                    <button id="convertBtn" class="btn btn-primary">Convert to CSV</button>
                </div>
            </div>
            <div class="ads-placeholder">AdSense Ad Space</div>
            <div class="card" id="outputSection" style="display: none;">
                <h2 class="section-title">Step 2: Your CSV Result</h2>
                <textarea id="csvOutput" readonly></textarea>
                <div class="btn-container">
                    <button id="downloadBtn" class="btn btn-success">Download CSV File</button>
                </div>
            </div>
            <section class="instructions">
                <h2>How to Use</h2>
                <p>Paste your JSON and click "Convert to CSV". All processing is local. Download your CSV instantly.</p>
            </section>
        </main>
        <footer>
            <p>&copy; 2026 Universal Data Converter. All rights reserved.</p>
        </footer>
    </div>
    <script src="../js/json-to-csv.js"></script>
    <script src="../js/downloader.js"></script>
    <script src="../js/analytics.js"></script>
    <script>
        initAnalytics('G-66CY0Q6VPS');
        const jsonInput = document.getElementById('jsonInput');
        const csvOutput = document.getElementById('csvOutput');
        const convertBtn = document.getElementById('convertBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const outputSection = document.getElementById('outputSection');
        const errorMessage = document.getElementById('errorMessage');
        window.addEventListener('load', () => {
            const savedJson = localStorage.getItem('jsonToCsv_input');
            if (savedJson) jsonInput.value = savedJson;
        });
        jsonInput.addEventListener('input', () => {
            localStorage.setItem('jsonToCsv_input', jsonInput.value);
        });
        convertBtn.addEventListener('click', () => {
            const input = jsonInput.value.trim();
            if (!input) return showError('Please enter some JSON data.');
            try {
                const csv = jsonToCsv(input);
                csvOutput.value = csv;
                outputSection.style.display = 'block';
                downloadBtn.style.display = 'inline-flex';
                errorMessage.style.display = 'none';
            } catch (err) {
                showError(err.message);
            }
        });
        downloadBtn.addEventListener('click', () => {
            const content = csvOutput.value;
            if (content) downloadCsv(content, 'converted_data.csv');
        });
        function showError(msg) {
            errorMessage.textContent = msg;
            errorMessage.style.display = 'block';
            outputSection.style.display = 'none';
        }
    </script>
</body>

</html>