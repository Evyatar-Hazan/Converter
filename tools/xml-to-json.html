<!-- XML to JSON Tool (standalone page) -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML to JSON Converter</title>
    <meta name="description" content="Convert XML to JSON online. Fast, private, and free.">
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <a href="../index.html" class="back-link">‚Üê Back to Hub</a>
            <h1>XML to JSON Converter</h1>
            <p class="description">Convert your XML into clean, well-structured JSON instantly. Runs entirely in your
                browser for privacy.</p>
        </header>
        <main>
            <div class="card">
                <h2 class="section-title">Step 1: Paste your XML here</h2>
                <textarea id="xmlInput"
                    placeholder='<root>\n  <item id="1">Alpha</item>\n  <item id="2">Beta</item>\n</root>'></textarea>
                <div id="errorMessage" class="error-msg"></div>
                <div class="btn-container">
                    <button id="convertBtn" class="btn btn-primary">Convert to JSON</button>
                </div>
            </div>
            <div class="ads-placeholder">AdSense Ad Space</div>
            <div class="card" id="outputSection" style="display: none;">
                <h2 class="section-title">Step 2: Your JSON Result</h2>
                <textarea id="jsonOutput" readonly></textarea>
                <div class="btn-container">
                    <button id="downloadBtn" class="btn btn-success">Download JSON File</button>
                </div>
            </div>
            <section class="instructions">
                <h2>How to Use</h2>
                <p>Paste your XML and click "Convert to JSON". All processing is local. Download your JSON instantly.
                </p>
            </section>
        </main>
        <footer>
            <p>&copy; 2026 Universal Data Converter. All rights reserved.</p>
        </footer>
    </div>
    <script src="../js/xml-to-json.js"></script>
    <script src="../js/downloader.js"></script>
    <script src="../js/analytics.js"></script>
    <script>
        initAnalytics('G-66CY0Q6VPS');
        const xmlInput = document.getElementById('xmlInput');
        const jsonOutput = document.getElementById('jsonOutput');
        const convertBtn = document.getElementById('convertBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const outputSection = document.getElementById('outputSection');
        const errorMessage = document.getElementById('errorMessage');
        window.addEventListener('load', () => {
            const savedXml = localStorage.getItem('xmlToJson_input');
            if (savedXml) xmlInput.value = savedXml;
        });
        xmlInput.addEventListener('input', () => {
            localStorage.setItem('xmlToJson_input', xmlInput.value);
        });
        convertBtn.addEventListener('click', () => {
            const input = xmlInput.value.trim();
            if (!input) return showError('Please enter some XML data.');
            try {
                const json = xmlToJson(input);
                jsonOutput.value = json;
                outputSection.style.display = 'block';
                downloadBtn.style.display = 'inline-flex';
                errorMessage.style.display = 'none';
            } catch (err) {
                showError(err.message);
            }
        });
        downloadBtn.addEventListener('click', () => {
            const content = jsonOutput.value;
            if (content) downloadJson(content, 'converted_data.json');
        });
        function showError(msg) {
            errorMessage.textContent = msg;
            errorMessage.style.display = 'block';
            outputSection.style.display = 'none';
        }
    </script>
</body>

</html>